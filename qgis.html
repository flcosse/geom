<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script type="text/javascript">
      $(function(){
      $("#navbar").load("navbar.html"); 
      });
        </script>
    <link rel="stylesheet" href="style.css">
    <meta charset="utf-8">
    <title>Potentiel solaire</title>
    <link rel="shortcut icon" href="image/compass-solid.svg" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
  </head>
  <body>
    <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/styles/atom-one-light.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/languages/python.min.js"></script>
  
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
    <div class="container-fluid" id="navbar"></div>
      <div class="block">
      <div class="article">
        <h1>Analyse raster avec QGIS</h1>
        <div class="tags">
        <h4> <span class="badge bg-secondary">QGIS</span></h4>
        <h4> <span class="badge bg-secondary">Raster</span></h4>
        <h4> <span class="badge bg-secondary" style="float:none">Leaflet</span></h4>
    </div>
    <div class="textaire">
    <p>

        Cette carte interactive et les couches qu'elle contient ont été générées sur QGIS. Les notes sont attribuées selon les critères suivants ;
        <ul style="list-style: disc;">
            <li>Le terrain doit être orienté vers le Sud.</li>
            <li>La pente doit être inférieur à 5°.</li>
            <li>Le terrain se situe à moins de 10km d'une ligne de réseau électrique.</li>
            <li>Les zones analysées doivent réposer sur des forêts, prairies ou potentiellement sur des champs.</li>
            <li>Ces critères ont des ordres d'importance qui formeront une note finale.</li>

            </ul>
          </div>
          </p>
         <div class="fi" style="text-align: center">
            <iframe src="qleaflet.html"scrolling="no" style="position:relative;z-index:999" frameBorder="0" height="90%" width="100%" title=""></iframe>
          </div>
          <br>
            <pre><code class="javascript">var map = L.map('map').setView([43.3269942, -0.8532809], 9);
var tile = L.tileLayer('https://{s}.tile.jawg.io/jawg-light/{z}/{x}/{y}{r}.png?access-token={accessToken}', {
    attribution: '<a href="http://jawg.io" title="Tiles Courtesy of Jawg Maps" target="_blank">&copy; <b>Jawg</b>Maps</a> &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
    minZoom: 0,
    maxZoom: 22,
    subdomains: 'abcd',
    accessToken: 'cHwHz2jFd1k6blmFA6wnYur05s8mCVw6336l2GHmEEAWqvCNZ0dfQMazW83EJUHw'
});
tile.addTo(map);

var polystyle = {
    "color": "#363636",
    "weight": 2,
    "opacity": 1,
    "fillOpacity": 0.1
};

function getColor(d) {
    return d > 1000 ? '#800026' :
        d >= 5 ? '#fde725' :
        d >= 4 ? '#5dc963' :
        d >= 3 ? '#21908d' :
        d >= 2 ? '#3b528b' :
        d >= 1 ? '#440154' :
        d > 0 ? '#FED976' :
        '#FFEDA0';
}

function style(feature) {
    return {
        fillColor: getColor(feature.properties.DN),
        weight: .5,
        opacity: 1,
        color: getColor(feature.properties.DN),
        fillOpacity: 0.9
    };
}


var layerGroup = $.getJSON("file/FILE.geojson", function(data) {
    L.geoJSON(data, {
        onEachFeature: function(feature, layer) {
            layer.bindPopup('<p>' + feature.properties.DN + '/5</p>')},
        style: style}).addTo(map)});

var res = $.getJSON("file/RES.geojson", function(lay) {
    L.geoJSON(lay, {
        onEachFeature: function(feature, layer) {
            layer.bindTooltip('<p>' + feature.properties.voltage / 1000 + ' kV</p>', {
                sticky: true})},style: polystyle}).addTo(map)});


var legend = L.control({position: "bottomleft"});

legend.onAdd = function(map) {
    var div = L.DomUtil.create("div", "legend");
    div.innerHTML += "<h4 style='margin-left:-0.5vh'>Note de l'analyse</h4>";
    div.innerHTML += `<i style="background: #440154;"></i><span id="test">1</span><br>`;
    div.innerHTML += '<i style="background:#3b528b  "></i><span id="test">2</span><br>';
    div.innerHTML += '<i style="background: #21908d"></i><span id="test">3</span><br>';
    div.innerHTML += '<i style="background: #5dc963"></i><span id="test">4</span><br>';
    div.innerHTML += '<i style="background: #fde725"></i><span id="test">5</span><br>';
    div.innerHTML += '<i style="background: #282828; height:3px;margin-top:.6rem"></i><span id="test">Réseau électrique</span><br>';
    return div;
};

legend.addTo(map);
              </code></pre>

  </div>
  
      </body>